# 设计模式

## 1. 设计模式简介

**书籍推荐**：GOF 《设计模式：可复用面向对象软件的基础》

​							《重构：改善代码的既有设计》

​							《重构与模式》

**学习目标：**

​		理解松耦合设计思想

​		掌握面向对象设计原则

​		掌握重构技法改善设计	

​		掌握GOF核心设计模式

​		

软件设计复杂的根本原因： **变化**

​		解决复杂性问题：**分解（分治）、抽象**

​		如何理解这两个呢？

​			-> 对于分解，比如我们有一个需要绘图的工具，绘制不同的形状，按照分解的思想，我们会分解出各种不同的形状，然后编写程序分别处理，如果增加了一个新的形状，我们还需要更改大量的代码。

​			-> 对于抽象，我们要抽象出这些绘制不同形状的最本质的东西，那就是“形状”， 无论什么形状其本质都是形状，这样我们会在抽象的基础上面在进行程序的设计，能够使用继承、多态、封装等思想，来简化程序的编写。

​			**设计模式的复用指的是编译层面，编译单位的复用性。**



## 2. 面向对象设计原则

面向对象能够抵御变化

### 八大面向对象设计原则

> - 依赖倒置原则（DIP）
>     - 高层模块（稳定）不应该依赖于底层模块（变化），二者都应该依赖于抽象（稳定）
>     - 抽象（稳定）不应该依赖于实现细节（变化），实现细节应该依赖于抽象（稳定） 

<img src="C:\Users\MengSansui\AppData\Roaming\Typora\typora-user-images\image-20200916194304913.png" alt="image-20200916194304913" style="zoom:50%;" /><img src="C:\Users\MengSansui\AppData\Roaming\Typora\typora-user-images\image-20200916194328982.png" alt="image-20200916194328982" style="zoom:50%;" />

> - 开放封闭原则（OCP）
>     - 对扩展开放，对更改封闭
>     - 类模块应该是可扩展的，但是不可修改
>     - 通过增加来满足新增需求，而不是到处修改
> - 单一职责原则（SRP）
>     - 一个类应该仅有一个引起它变化的原因
>     - 变化的方向隐含着类的责任
> - Liskov替换原则（LSP）
>     - 子类必须能够替换他们的基类（IS-A）
>     - 继承表达类型抽象
> - 接口隔离原则（ISP）
>     - 不应该强迫客户程序依赖它们不用的方法
>     - 接口应该小而完备
> - 优先使用对象组合，而不是类继承
>     - 类继承称为“白箱复用”， 对象组合通常为“黑箱复用”
>     - 继承在某种程度上破坏了封装性，子类父类耦合度高
>     - 对象组合耦合度低
> - 封装变化点
>     - 使用封装来创建对象之间的分界层
> - 针对接口编程，而不是针对实现编程



## 3. 模板方法

**GOF-23模式分类**

- 从目的分：

​		创建型模式：对象创建的问题

​		结构型模式：需求变化对对象结构变化的冲击

​		行为型模式：类之间交互责任划分等

- 范围来分：

    类模式处理类与子类的静态关系

    对象模式处理对象间动态关系



>  **设计模式要点：找到变化点，在变化点出应用设计模式，管理变化**
>
>  **重构获得模式，refactoring to patterns**，通过重构来获得模式
>
> 对于使用设计模式，要找到稳定和变化的地方



重构关键技法：

![image-20200916201604252](C:\Users\MengSansui\AppData\Roaming\Typora\typora-user-images\image-20200916201604252.png)